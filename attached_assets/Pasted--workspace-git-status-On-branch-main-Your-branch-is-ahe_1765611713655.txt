~/workspace$ git status
On branch main
Your branch is ahead of 'origin/main' by 3 commits.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean
~/workspace$ git push origin main
Enumerating objects: 27, done.
Counting objects: 100% (27/27), done.
Delta compression using up to 8 threads
Compressing objects: 100% (19/19), done.
Writing objects: 100% (19/19), 14.83 KiB | 3.71 MiB/s, done.
Total 19 (delta 17), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (17/17), completed with 8 local objects.
To https://github.com/Mikejz1978/sillydog-app.git
   fc69a77..c7c239d  main -> main
~/workspace$ git push origin main
Enumerating objects: 60, done.
Counting objects: 100% (60/60), done.
Delta compression using up to 8 threads
Compressing objects: 100% (45/45), done.
Writing objects: 100% (46/46), 14.96 KiB | 3.74 MiB/s, done.
Total 46 (delta 39), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (39/39), completed with 13 local objects.
To https://github.com/Mikejz1978/sillydog-app.git
   c7c239d..9fda017  main -> main
~/workspace$ git status
On branch main
Your branch is up to date with 'origin/main'.

nothing to commit, working tree clean
~/workspace$ git add .
~/workspace$ git status
On branch main
Your branch is up to date with 'origin/main'.

nothing to commit, working tree clean
~/workspace$ git commit -m "Add field payment support (card, check, cash) with invoice integration"
On branch main
Your branch is up to date with 'origin/main'.

nothing to commit, working tree clean
~/workspace$ git push origin main
Everything up-to-date
~/workspace$ npm install && npm run build

up to date, audited 526 packages in 2s

62 packages are looking for funding
  run `npm fund` for details

4 vulnerabilities (2 low, 2 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.21 building for production...
transforming (4) src/App.tsx
A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
✓ 2208 modules transformed.
../dist/public/index.html                                  1.69 kB │ gzip:   0.71 kB
../dist/public/assets/sillydog-logo-B3qDCprO.png       1,664.51 kB
../dist/public/assets/logo_1762200437346-B4wVA81p.png  1,810.41 kB
../dist/public/assets/index-BqkQGgd5.css                 108.36 kB │ gzip:  16.68 kB
../dist/public/assets/index-RbqPYkFf.js                  846.08 kB │ gzip: 232.50 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 6.96s
sh: 1: esbuild: not found
~/workspace$ npm i -D esbuild

up to date, audited 526 packages in 1s

62 packages are looking for funding
  run `npm fund` for details

4 vulnerabilities (2 low, 2 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
~/workspace$ npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.21 building for production...
transforming (4) src/App.tsx
A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
✓ 2208 modules transformed.
../dist/public/index.html                                  1.69 kB │ gzip:   0.71 kB
../dist/public/assets/sillydog-logo-B3qDCprO.png       1,664.51 kB
../dist/public/assets/logo_1762200437346-B4wVA81p.png  1,810.41 kB
../dist/public/assets/index-BqkQGgd5.css                 108.36 kB │ gzip:  16.68 kB
../dist/public/assets/index-RbqPYkFf.js                  846.08 kB │ gzip: 232.50 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 7.76s
sh: 1: esbuild: not found
~/workspace$ pwd
ls
cat package.json | head -40
/home/runner/workspace
attached_assets  components.json       dist                install-deps.sh  package-lock.json  server                         tailwind.config.ts
bun.lock         customers_export.csv  drizzle.config.ts   node_modules     postcss.config.js  shared                         tsconfig.json
client           design_guidelines.md  generated-icon.png  package.json     replit.md          sillydogpooper-project.tar.gz  vite.config.ts
{
  "name": "rest-express",
  "version": "1.0.0",
  "type": "module",
  "license": "MIT",
  "scripts": {
    "dev": "NODE_ENV=development tsx server/index.ts",
    "build": "vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist",
    "start": "NODE_ENV=production node dist/index.js",
    "check": "tsc",
    "db:push": "drizzle-kit push"
  },
  "dependencies": {
    "@googlemaps/google-maps-services-js": "^3.4.2",
    "@hookform/resolvers": "^3.10.0",
    "@jridgewell/trace-mapping": "^0.3.25",
    "@neondatabase/serverless": "^0.10.4",
    "@radix-ui/react-accordion": "^1.2.4",
    "@radix-ui/react-alert-dialog": "^1.1.7",
    "@radix-ui/react-aspect-ratio": "^1.1.3",
    "@radix-ui/react-avatar": "^1.1.4",
    "@radix-ui/react-checkbox": "^1.1.5",
    "@radix-ui/react-collapsible": "^1.1.4",
    "@radix-ui/react-context-menu": "^2.2.7",
    "@radix-ui/react-dialog": "^1.1.7",
    "@radix-ui/react-dropdown-menu": "^2.1.7",
    "@radix-ui/react-hover-card": "^1.1.7",
    "@radix-ui/react-label": "^2.1.3",
    "@radix-ui/react-menubar": "^1.1.7",
    "@radix-ui/react-navigation-menu": "^1.2.6",
    "@radix-ui/react-popover": "^1.1.7",
    "@radix-ui/react-progress": "^1.1.3",
    "@radix-ui/react-radio-group": "^1.2.4",
    "@radix-ui/react-scroll-area": "^1.2.4",
    "@radix-ui/react-select": "^2.1.7",
    "@radix-ui/react-separator": "^1.1.3",
    "@radix-ui/react-slider": "^1.2.4",
    "@radix-ui/react-slot": "^1.2.0",
    "@radix-ui/react-switch": "^1.1.4",
    "@radix-ui/react-tabs": "^1.1.4",
~/workspace$ npm ls esbuild
rest-express@1.0.0 /home/runner/workspace
├─┬ tsx@4.21.0
│ └── esbuild@0.27.1
└─┬ vite@5.4.21
  └── esbuild@0.21.5

~/workspace$ "build": "vite build && esbuild server/index.ts ..."
bash: build:: command not found
~/workspace$ npm ls esbuild
ls -la node_modules/.bin | grep esbuild || echo "NO ESBUILD BIN"
rest-express@1.0.0 /home/runner/workspace
├─┬ tsx@4.21.0
│ └── esbuild@0.27.1
└─┬ vite@5.4.21
  └── esbuild@0.21.5

NO ESBUILD BIN
~/workspace$ npm install --save-dev esbuild@0.25.0 --force
npm warn using --force Recommended protections disabled.

up to date, audited 526 packages in 2s

62 packages are looking for funding
  run `npm fund` for details

4 vulnerabilities (2 low, 2 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
~/workspace$ ls -la node_modules/.bin | grep esbuild || echo "STILL NO ESBUILD BIN"
STILL NO ESBUILD BIN
~/workspace$ node -e "const fs=require('fs'); const p=require('./package.json'); p.scripts.build='vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist'; fs.writeFileSync('package.json', JSON.stringify(p,null,2));"
~/workspace$ cat package.json | grep '"build"'
    "build": "vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist",
~/workspace$ npm run build

> rest-express@1.0.0 build
> vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.21 building for production...
transforming (4) src/App.tsx
A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
✓ 2208 modules transformed.
../dist/public/index.html                                  1.69 kB │ gzip:   0.71 kB
../dist/public/assets/sillydog-logo-B3qDCprO.png       1,664.51 kB
../dist/public/assets/logo_1762200437346-B4wVA81p.png  1,810.41 kB
../dist/public/assets/index-BqkQGgd5.css                 108.36 kB │ gzip:  16.68 kB
../dist/public/assets/index-RbqPYkFf.js                  846.08 kB │ gzip: 232.50 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 6.34s
sh: 1: esbuild: not found
~/workspace$ node -e "const fs=require('fs'); const p=require('./package.json'); p.scripts.build='vite build && node node_modules/esbuild/bin/esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist'; fs.writeFileSync('package.json', JSON.stringify(p,null,2));"
~/workspace$ cat package.json | grep '"build"'
    "build": "vite build && node node_modules/esbuild/bin/esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist",
~/workspace$ ls -la node_modules/esbuild/bin/esbuild || echo "NO TOP-LEVEL ESBUILD BIN"
ls: cannot access 'node_modules/esbuild/bin/esbuild': No such file or directory
NO TOP-LEVEL ESBUILD BIN
~/workspace$ node -e "console.log(require.resolve('esbuild'))"
node:internal/modules/cjs/loader:1215
  throw err;
  ^

Error: Cannot find module 'esbuild'
Require stack:
- /home/runner/workspace/[eval]
    at Module._resolveFilename (node:internal/modules/cjs/loader:1212:15)
    at Function.resolve (node:internal/modules/helpers:193:19)
    at [eval]:1:21
    at runScriptInThisContext (node:internal/vm:209:10)
    at node:internal/process/execution:118:14
    at [eval]-wrapper:6:24
    at runScript (node:internal/process/execution:101:62)
    at evalScript (node:internal/process/execution:133:3)
    at node:internal/main/eval_string:51:3 {
  code: 'MODULE_NOT_FOUND',
  requireStack: [ '/home/runner/workspace/[eval]' ]
}

Node.js v20.19.3