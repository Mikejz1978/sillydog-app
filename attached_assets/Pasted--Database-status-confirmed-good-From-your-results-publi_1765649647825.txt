âœ… Database status (confirmed good)

From your results:

public_approved = 2 âœ…

status='approved' exists âœ…

is_public=true âœ…

rating + comment present âœ…

customer_id now valid UUID âœ…

So the data is 100% correct.

âŒ Why /api/reviews/public still returns []

This is definitely an API filter mismatch, not a DB issue.

Your endpoint is not filtering by:

is_public = true
AND status = 'approved'


It is filtering by something stricter.

The most common culprits (one of these is true in your code):

status = 'published' (instead of 'approved')

submitted_at IS NOT NULL AND status = 'submitted'

review_token IS NOT NULL AND status='completed'

rating >= 1 AND customer_id IS NOT NULL AND status='approved' AND route_id IS NOT NULL

Join to customers/routes silently excludes rows

Given your schema and app flow, the most likely is:

ğŸ”¥ status = 'pending' is being excluded, but approved is ALSO excluded

or

ğŸ”¥ The endpoint only returns reviews with a non-null route_id

Your imported reviews have:

route_id = NULL

âœ… Fastest Fix (2 options)
ğŸ”§ OPTION A (DB-side fix â€” fastest)

Make your imported reviews match what the endpoint already expects.

Run this once:

psql "$DBURL" -c "
update reviews
set status='pending'
where status='approved'
  and customer_name in ('Maria T.','John D.');
"


Then refresh:
ğŸ‘‰ https://sillydog-app.onrender.com/api/reviews/public

If they show up â†’ weâ€™re DONE.

ğŸ›  OPTION B (Correct fix â€” code-side, recommended)

Update the public endpoint to explicitly allow approved reviews.

In server/routes.ts (or wherever /api/reviews/public is):

Find something like:

where(eq(reviews.status, 'pending'))


or

.where(and(
  eq(reviews.isPublic, true),
  eq(reviews.status, 'pending')
))


ğŸ” Change it to:

.where(and(
  eq(reviews.isPublic, true),
  inArray(reviews.status, ['approved', 'pending'])
))


OR (cleanest):

.where(eq(reviews.isPublic, true))


Then redeploy.

ğŸ§  Why this happened (so it doesnâ€™t bite you again)

Your app was built with this assumption:

Reviews only become â€œpublicâ€ after going through the customer review flow

Imported reviews skip that flow, so:

no route_id

no â€œsubmittedâ€ lifecycle

different status

Totally normal â€” but APIs often assume the original lifecycle.

ğŸ¯ What I recommend you do right now

Do Option A first (1 SQL command) just to confirm endpoint behavior.
If it works, weâ€™ll clean the endpoint properly in code next so future imports are painless.

Run Option A and tell me:

Do the reviews appear on /api/reviews/public?